<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
<xi:include href="../master.html" />
<head>
	<title>${video.title}</title>
	<link href="/styles/videos.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="/styles/ratings.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="/styles/forms.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="/styles/comments.css" media="screen" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="/scripts/rater.js"></script>
	<script type="text/javascript">
		window.addEvent('domready', function(){
			var raterness = new FiveStarRater('video-rating');
		});
	</script>
</head>
<body>
	<div id="video-details" class="box">
		<div class="box-top"></div>
		<div class="box-body">
			<div class="video-info">
				<h1>${video.title}</h1>
				${XML(h.format_paragraphs(video.description))}

				<ul py:with="tag_count = len(video.tags)" class="video-meta">
					<li py:choose="tag_count" class="video-tags">
						<strong>Tags:</strong>
						<py:when test="0">None</py:when>
						<py:otherwise py:for="i, tag in enumerate(video.tags)">
							<a href="${h.url_for(action='tags', slug=tag.slug)}" rel="tag">${tag.name}</a><py:if test="i+1 != tag_count">,</py:if>
						</py:otherwise>
					</li>
					<li class="video-views">
						<strong>Views:</strong> ${video.views}
					</li>
					<li class="video-rating">
						<strong>Rating:</strong>
						<span id="video-rating" class="rating rating-inline rating-35 clickable"><span>3.5</span></span>
					</li>
					<li class="video-duration">
						<strong>Length:</strong> ${h.duration_from_seconds(video.duration)}
					</li>
				</ul>

				<img src="/images/buttons/share.png" />
				<img src="/images/buttons/embed-video.png" />
			</div>
			${XML(h.video_player(video.url))}
		</div>
		<div class="box-bottom"></div>
	</div>

	<div class="comments">
		<h2>Comments <span>&#123;${len(video.comments)}&#125;</span></h2>
		<py:choose test="len(video.comments)">
			<p py:when="0" class="comments-none-yet">No comments have been posted yet.</p>
			<ul py:otherwise="" class="comments-list">
				<li py:for="i, comment in enumerate(video.comments)"
					py:attrs="{'class': [None, 'alt'][i%2]}">
					<img src="/images/avatars/_default.gif" width="32" height="32" class="avatar" />
					<a name="comment-${comment.id}" href="#comment-${comment.id}" class="date" title="Permalink">${comment.created_on}</a>
					<h4><cite>${comment.author.name} says:</cite></h4>
					<blockquote>${XML(h.format_paragraphs(comment.body))}</blockquote>
				</li>
			</ul>
		</py:choose>

		<h3>Leave a Reply</h3>
		${XML(comment_form(form_values))}
	</div>
</body>
</html>
