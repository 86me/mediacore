<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
<xi:include href="admin/master.html" />
<head>
	<title>Edit: ${video.title}</title>
	<link href="/admin/styles/media.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="/admin/styles/videos.css" media="screen" rel="stylesheet" type="text/css" />
	<script src="/admin/scripts/slug.js" type="text/javascript"></script>
	<script src="/scripts/third-party/squeezebox-1.1-rc3.js" type="text/javascript"></script>
	<link href="/admin/styles/squeezebox.css" media="screen" rel="stylesheet" type="text/css" />
	<script src="/admin/scripts/album-art.js" type="text/javascript"></script>
	<script src="/admin/scripts/statuses.js" type="text/javascript"></script>
</head>
<body class="menu-videos-on">
	<div class="column66">
		<div class="box">
			<div class="box-head">
				<small py:if="video.created_on" class="box-head-sec">Uploaded: ${video.created_on.strftime('%b %d %Y')}</small>
				<h1>${video.title or 'New Video'}</h1>
			</div>
			${XML(form(form_values))}
		</div>
	</div>
	<div class="column33">
		<div class="box">
			<h1 class="box-head">Album Art</h1>
			<div class="box-content center">
				<div id="album-art"><img src="/images/videos/${video.id}.jpg" width="131" height="79" alt="Album Art" /></div>
				<img id="edit-album-art" class="clickable" src="/admin/images/buttons/edit-image.png" />
			</div>
		</div>
		${XML(album_art_form)}
		<br />
		<form method="post" action="/admin/video/${video.id}/update_status"
		      id="update_status_form" class="box"
		      py:choose="">
			<h1 class="box-head">Publish Status</h1>
			<div py:when="'pending_review' in video.status" class="box-content">
				<ol id="status-list">
					<li class="status-list-inprogress">review in progress</li>
					<li class="status-list-pending">encoding pending</li>
					<li class="status-list-pending">publishing pending</li>
				</ol>
				<div py:content="h.tags.submit('update_status', 'Review Complete', id='update-status', class_='submitbutton btn-review-complete')" class="center" />
			</div>
			<div py:when="'pending_encoding' in video.status" class="box-content">
				<ol id="status-list">
					<li class="status-list-complete">review complete</li>
					<li class="status-list-inprogress">encoding in progress</li>
					<li class="status-list-pending">publishing pending</li>
				</ol>
				<div py:content="h.tags.submit('update_status', 'Encoding Complete', id='update-status', class_='submitbutton btn-encode-complete')" class="center" />
			</div>
			<div py:when="'draft' in video.status" class="box-content">
				<ol id="status-list">
					<li class="status-list-complete">review complete</li>
					<li class="status-list-complete">encoding complete</li>
					<li class="status-list-inprogress">publishing pending</li>
				</ol>
				<div py:content="h.tags.submit('update_status', 'Publish Now', id='update-status', class_='submitbutton btn-publish-now')" class="center" />
			</div>
			<div py:when="'publish' in video.status" class="box-content">
				<ol id="status-list">
					<li class="status-list-complete">review complete</li>
					<li class="status-list-complete">encoding complete</li>
					<li class="status-list-complete">published ${video.publish_on.strftime('%b %d %Y')}</li>
				</ol>
			</div>
			<div py:otherwise="" class="box-content">${video.status}</div>
		</form>
	</div>
</body>
</html>
